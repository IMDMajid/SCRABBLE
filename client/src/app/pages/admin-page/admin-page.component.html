<app-background [isDark]="true"></app-background>
<div id="title">
    <div id="typing">Page admin</div>
</div>
<div id="wrapper">
    <div id="dictionaries" class="window">
        <div class="fake-menu">
            <div class="fake-buttons fake-close"></div>
            <div class="fake-buttons fake-minimize"></div>
            <div class="fake-buttons fake-zoom"></div>
        </div>
        <h2>
            Dictionnaires
            <hr />
        </h2>
        <div class="window-content">
            <div class="accordion-buttons">
                <button mat-button (click)="accordion.openAll()">Tout développer</button>
                <button mat-button (click)="accordion.closeAll()">Tout réduire</button>
            </div>
            <div class="scrollable" #scrollMe>
                <mat-accordion multi>
                    <mat-expansion-panel *ngFor="let dictionary of this.dictionaries" [disabled]="dictionary.isDefault">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                {{ dictionary.title }}
                            </mat-panel-title>
                            <mat-panel-description>
                                {{ dictionary.description }}
                            </mat-panel-description>
                            <mat-icon *ngIf="dictionary.isDefault">lock</mat-icon>
                        </mat-expansion-panel-header>
                        <mat-icon color="warn">delete_forever</mat-icon>
                        <mat-icon>create</mat-icon>
                        <mat-icon>get_app</mat-icon>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="center">
                <!-- TODO changer couleur (vert si possible) -->
                <button mat-raised-button class="fill" (click)="fileInput.click()">
                    {{ file ? file.name : 'Choisir un fichier' }}
                    <div class="accepted-file" [ngClass]="{ invisible: file !== null }">(.json Seulement)</div>
                </button>
                <input hidden type="file" accept=".json" #fileInput (change)="onFileInput(fileInput.files)" />

                <button mat-fab color="" [disabled]="!file" [ngClass]="{ add: file, transparentAdd: !file }" type="submit" (click)="onSubmit()">
                    <mat-icon>cloud_upload</mat-icon>
                </button>
            </div>
            <div class="alert" [ngClass]="{ visible: uploadMessage.length, success: uploadMessage === 'Uploaded' }">
                {{ uploadMessage }}
            </div>
        </div>
    </div>

    <div id="right-bar">
        <div id="virtual-names" class="window">
            <div class="fake-menu">
                <div class="fake-buttons fake-close"></div>
                <div class="fake-buttons fake-minimize"></div>
                <div class="fake-buttons fake-zoom"></div>
            </div>
            <!-- TODO fixer limite de noms. si limite dépassée faire apparaître scrollbar -->
            <h2>
                Noms des joueurs virtuels
                <hr />
            </h2>
            <div class="window-content">
                <div class="list">
                    <div class="beginner">
                        <p class="name-title">Noms débutants</p>
                        <hr />
                        <div class="item" *ngFor="let aiBeginner of this.beginnerNames">
                            <p class="ai-name">{{ aiBeginner.aiName }}</p>
                            <span class="icons">
                                <button mat-stroked-button (click)="deleteAiPlayer(aiBeginner._id, true, aiBeginner.isDefault)">
                                    <mat-icon id="deleteIcon">delete_forever</mat-icon>
                                </button>
                                <button mat-stroked-button (click)="addAiToDatabase(true, false, aiBeginner._id, aiBeginner.isDefault)">
                                    <mat-icon id="editIcon">create</mat-icon>
                                </button>
                            </span>
                        </div>
                        <div class="center">
                            <!-- TODO changer couleur (vert si possible) -->
                            <!-- TODO couleur disparaît on hover!! -->
                            <button mat-mini-fab class="add" color="" (click)="addAiToDatabase(true, true)">
                                <mat-icon>add</mat-icon>
                            </button>
                        </div>
                    </div>
                    <div class="separator"></div>
                    <div class="expert">
                        <p class="name-title">Noms experts</p>
                        <hr />
                        <div class="item" *ngFor="let aiExpert of this.expertNames">
                            <p class="ai-name">{{ aiExpert.aiName }}</p>
                            <span class="icons">
                                <button (click)="deleteAiPlayer(aiExpert._id, false, aiExpert.isDefault)">
                                    <mat-icon color="warn">delete_forever</mat-icon>
                                </button>
                                <button (click)="addAiToDatabase(false, false, aiExpert._id, aiExpert.isDefault)">
                                    <mat-icon>create</mat-icon>
                                </button>
                            </span>
                        </div>
                        <div class="center">
                            <!-- TODO changer couleur (vert si possible) -->
                            <button mat-mini-fab class="add" color="" (click)="addAiToDatabase(false, true)">
                                <mat-icon>add</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="reset">
            <div class="delete-confirm">
                <button
                    mat-raised-button
                    color="warn"
                    (click)="isResetConfirmation = true"
                    (clickOutside)="cancelReset()"
                    [disabled]="isResetConfirmation"
                    [ngClass]="{ delete: true, confirm: isResetConfirmation }"
                >
                    <mat-icon>{{ isResetConfirmation ? 'warning' : 'restore' }}</mat-icon>
                    <span>{{ isResetConfirmation ? 'Confirmer?' : 'Réinitialiser' }}</span>
                </button>
                <button mat-raised-button class="yes" (click)="resetData()"><span>Oui</span></button>
                <button mat-raised-button class="no"><span>Annuler</span></button>
            </div>
        </div>
    </div>
</div>
